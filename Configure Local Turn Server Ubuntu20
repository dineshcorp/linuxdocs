# Configure Local turn server using local IP - Ubuntu20

To configure a local TURN server using only a local IP on Ubuntu 20.04, follow these steps using the Coturn package:

### Installation

- Install Coturn with:

```
sudo apt update
sudo apt install coturn
```

This will set up all required binaries and service files for running a TURN server (coturn) on your system.

### Basic Configuration

- Backup the default configuration:

```
sudo mv /etc/turnserver.conf /etc/turnserver.conf.backup
```

Create a new configuration file:

```
sudo vim /etc/turnserver.conf
```

- Add these minimal settings for a local-only setup:

```
# Basic settings
listening-port=3478
tls-listening-port=5349
listening-ip=172.20.11.21
relay-ip=172.20.11.21
#external-ip=196.188.118.140

# Use long-term credentials
lt-cred-mech
realm=172.20.11.21

# Add user (username:password)
user=dtel:dtel@123

# Certificates (optional for TLS)
cert=/etc/ssl/certs/nginx-selfsigned.crt
pkey=/etc/ssl/private/nginx-selfsigned.key

# Security
fingerprint
no-multicast-peers
no-loopback-peers
stale-nonce

# Logging
log-file=/var/log/turnserver.log
simple-log             
```

Replace `172.20.11.21` with your actual local IP, and edit the username/password as required.


### Final Steps

- Start and enable the TURN server service:

```
sudo systemctl enable coturn
sudo systemctl start coturn
```

- Verify it's running and listening only on the specified local IP using:

```
sudo netstat -nltp | grep 3478
```

or

```
sudo ss -nltp | grep 3478
```

Only your chosen local IP should be listed as the listening address.


### Additional Security (Optional)

- Disable STUN if you want TURN-only:

```
no-stun
```
